package com.softserve.next;

import java.io.EOFException;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;
import java.util.List;

public class CarManager {

	public void serializeCar(List<Car> cars){
		try(ObjectOutputStream oos = 
				new ObjectOutputStream(new FileOutputStream("cars.txt"))){
			for (int i = 0; i < cars.size(); i++) {
				oos.writeObject(cars.get(i));
			}
			oos.reset();
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	public List<Car> deSerializeCar(){
		List<Car> cars = new ArrayList<>();
		try(ObjectInputStream ois = 
				new ObjectInputStream(new FileInputStream("cars.txt"))){
			Car car = null;
			while(ois.available() > 0) {
				car = (Car) ois.readObject();
				if(car != null){
					cars.add(car);
				} 
			}     
		} catch (EOFException e){
			e.printStackTrace();
		} catch (FileNotFoundException e1) {
			e1.printStackTrace();
		} catch (IOException e2) {
			e2.printStackTrace();
		} catch (ClassNotFoundException e3) {
			e3.printStackTrace();
		}
		return cars;
	}

}
